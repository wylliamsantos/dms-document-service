---
spring:
  main:
    banner-mode: off
  mvc:
    pathmatch:
      matching-strategy: "ant-path-matcher"
  application:
    group: dms
    name: dms-document-service
  cache:
    ehcache:
      config: classpath:ehcache.xml
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: ${KEYCLOAK_ISSUER_URI:http://localhost:8180/realms/dms}
management:
  endpoints.web.exposure.include: 'health,prometheus'
  endpoint:
    metrics.enabled: false
    prometheus.enabled: true
  health:
    consul.enabled: false
    vault.enabled: false
---
spring:
  config:
    activate:
      on-profile: default
    import: "vault://secretv2/${spring.application.group}/${spring.application.name},consul:/config/${spring.application.group}/${spring.application.name}"
  cloud:
    consul:
      scheme: https
      host: ${CONSUL_HOST:consul.dms-dev.in}
      port: 443
      config:
        format: YAML
        acl-token: ${CONSUL_TOKEN:}
    vault:
      uri: ${VAULT_URI:https://vault.dms-dev.in:443}
      fail-fast: true
      scheme: https
      authentication: ${VAULT_AUTH:TOKEN}
      token: ${VAULT_TOKEN:}
      kubernetes:
        role: ${spring.application.group}-${spring.application.name}
        kubernetes-path: ${CLUSTER_NAME}
  sleuth:
    sampler:
      probability: 1.0
  zipkin:
    base-url: ${ZIPKIN_URL:http://jaeger-collector.observability.svc.cluster.local:9411}

dms:
  contentTypes: "image/jpeg#image/png#image/tiff#application/pdf#text/plain#image/bmp#application/octet-stream#video/mp4#video/webm#video/ogg"
  billing:
    webhook-secret: ${DMS_BILLING_WEBHOOK_SECRET:}
    provider:
      enabled: ${DMS_BILLING_PROVIDER_ENABLED:false}
      base-url: ${DMS_BILLING_PROVIDER_BASE_URL:}
      api-key: ${DMS_BILLING_PROVIDER_API_KEY:}
      subscription-path: ${DMS_BILLING_PROVIDER_SUBSCRIPTION_PATH:/v1/subscriptions/{id}}
  cors:
    allowed-origins: ${DMS_CORS_ALLOWED_ORIGINS:http://localhost:5173}
    allowed-methods: ${DMS_CORS_ALLOWED_METHODS:GET,POST,PUT,DELETE,OPTIONS}
    allowed-headers: ${DMS_CORS_ALLOWED_HEADERS:*}
    allow-credentials: ${DMS_CORS_ALLOW_CREDENTIALS:true}
